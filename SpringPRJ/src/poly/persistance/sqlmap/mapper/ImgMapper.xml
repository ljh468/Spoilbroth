<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- JAVA와 연결할 Mapper 파일 설정 -->
<mapper namespace="poly.persistance.mapper.IImgMapper">

	<!-- 이미지파일 저장 쿼리 -->
	<insert id="InsertImage" parameterType="OcrDTO">
		INSERT INTO USER_IMG_INFO
			(
				SEQ,
				SAVE_FILE_PATH,
				SAVE_FILE_NAME,
				ORG_FILE_NAME,
				EXT,
				CHG_ID,
				CHG_DT
			)
		VALUES(	
				(SELECT IFNULL(MAX(SEQ), 0)+1 FROM IMG_INFO I),
				#{save_file_path},
				#{save_file_name},
				#{org_file_name},
				#{ext},
				#{chg_id},
				#{chg_dt}
			)
	</insert>
	<select id="getImgList" parameterType="String" resultType="hashmap">
		SELECT *
		FROM USER_IMG_INFO
		WHERE CHG_ID = #{id}
		ORDER BY CHG_DT DESC LIMIT 1
	
	</select>
	
	
</mapper>